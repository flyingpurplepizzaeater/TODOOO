---
phase: 02-canvas-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/package.json
  - frontend/tsconfig.json
  - frontend/vite.config.ts
  - frontend/index.html
  - frontend/src/main.tsx
  - frontend/src/App.tsx
  - frontend/src/vite-env.d.ts
autonomous: true

must_haves:
  truths:
    - "npm run dev starts the frontend without errors"
    - "Browser shows React app at http://localhost:5173"
    - "TypeScript compilation succeeds with strict mode"
  artifacts:
    - path: "frontend/package.json"
      provides: "React + Vite + TypeScript dependencies"
      contains: "\"react\""
    - path: "frontend/src/App.tsx"
      provides: "Root React component"
      exports: ["default"]
    - path: "frontend/vite.config.ts"
      provides: "Vite configuration with React plugin"
      contains: "@vitejs/plugin-react"
  key_links:
    - from: "frontend/index.html"
      to: "frontend/src/main.tsx"
      via: "script module import"
      pattern: "src/main.tsx"
    - from: "frontend/src/main.tsx"
      to: "frontend/src/App.tsx"
      via: "React render"
      pattern: "import.*App"
---

<objective>
Set up React frontend with Vite and TypeScript as the foundation for tldraw canvas.

Purpose: Phase 2 requires a frontend application. This plan establishes the React/Vite/TypeScript foundation that all subsequent canvas work builds upon.

Output: Working React development environment in frontend/ directory.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-canvas-foundation/02-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Vite React TypeScript project</name>
  <files>
    frontend/package.json
    frontend/tsconfig.json
    frontend/vite.config.ts
    frontend/index.html
    frontend/src/main.tsx
    frontend/src/App.tsx
    frontend/src/vite-env.d.ts
  </files>
  <action>
Create a new Vite project with React and TypeScript template in the frontend/ directory.

Steps:
1. Run: `npm create vite@latest frontend -- --template react-ts`
2. Navigate to frontend/ and run `npm install`
3. Verify tsconfig.json has `"strict": true`
4. Update vite.config.ts to set server port to 5173 (default)

The default Vite React template provides:
- React 18.x with TypeScript
- Vite dev server with HMR
- ESLint configuration
- TypeScript strict mode

Do NOT install tldraw or yjs yet - that's Plan 02.
  </action>
  <verify>
Run from frontend/ directory:
- `npm run dev` starts server without errors
- Visit http://localhost:5173 shows Vite + React page
- `npx tsc --noEmit` succeeds (TypeScript compiles)
  </verify>
  <done>
Frontend React app runs at http://localhost:5173 with TypeScript strict mode enabled.
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure project structure for canvas app</name>
  <files>
    frontend/src/App.tsx
    frontend/src/App.css
    frontend/src/index.css
  </files>
  <action>
Prepare the React app structure for canvas integration:

1. Replace App.tsx content with a minimal full-viewport container:
```tsx
import './App.css'

function App() {
  return (
    <div className="app-container">
      <div className="canvas-placeholder">
        Canvas will render here
      </div>
    </div>
  )
}

export default App
```

2. Update App.css with full-viewport styles:
```css
.app-container {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: column;
}

.canvas-placeholder {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f0f0f0;
  font-family: sans-serif;
  color: #666;
}
```

3. Update index.css to reset default margins:
```css
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body, #root {
  width: 100%;
  height: 100%;
}
```

This prepares for tldraw which requires `position: fixed; inset: 0` container.
  </action>
  <verify>
- `npm run dev` shows centered "Canvas will render here" text
- Browser dev tools show .app-container fills entire viewport
- No scrollbars appear on page
  </verify>
  <done>
App.tsx renders a full-viewport container ready for tldraw integration.
  </done>
</task>

<task type="auto">
  <name>Task 3: Add environment configuration</name>
  <files>
    frontend/.env.example
    frontend/src/config.ts
  </files>
  <action>
Set up environment configuration for backend connection:

1. Create frontend/.env.example:
```
VITE_API_URL=http://localhost:8000
VITE_WS_URL=ws://localhost:8000
```

2. Create frontend/src/config.ts:
```typescript
export const config = {
  apiUrl: import.meta.env.VITE_API_URL || 'http://localhost:8000',
  wsUrl: import.meta.env.VITE_WS_URL || 'ws://localhost:8000',
} as const
```

3. Copy .env.example to .env.local for local development:
```
cp frontend/.env.example frontend/.env.local
```

4. Add .env.local to frontend/.gitignore (if not already present)

This provides typed configuration for connecting to the FastAPI backend WebSocket at /ws/canvas/{board_id}.
  </action>
  <verify>
- frontend/.env.example exists with VITE_API_URL and VITE_WS_URL
- frontend/src/config.ts exports config object
- `npm run dev` still works (no import errors)
  </verify>
  <done>
Environment configuration ready with API and WebSocket URL settings.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Directory structure exists:
   - frontend/package.json
   - frontend/src/App.tsx
   - frontend/src/config.ts
   - frontend/.env.example

2. Commands succeed:
   - `cd frontend && npm run dev` starts dev server
   - `cd frontend && npx tsc --noEmit` passes type check

3. Browser verification:
   - http://localhost:5173 shows full-viewport gray container
</verification>

<success_criteria>
- React frontend runs at http://localhost:5173
- TypeScript strict mode enabled
- Full-viewport container ready for tldraw
- Environment config points to backend at localhost:8000
</success_criteria>

<output>
After completion, create `.planning/phases/02-canvas-foundation/02-01-SUMMARY.md`
</output>
