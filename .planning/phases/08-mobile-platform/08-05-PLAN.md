---
phase: 08-mobile-platform
plan: 05
type: execute
wave: 3
depends_on: ["08-01", "08-02", "08-03", "08-04"]
files_modified:
  - frontend/ios/App/App/Assets.xcassets/AppIcon.appiconset
  - frontend/ios/App/App/Assets.xcassets/Splash.imageset
  - frontend/android/app/src/main/res/mipmap-*/ic_launcher.png
  - frontend/android/app/src/main/res/drawable/splash.png
autonomous: false

must_haves:
  truths:
    - "iOS app installs from TestFlight and opens the canvas"
    - "Android app installs from APK and opens the canvas"
    - "App icon displays correctly on both platforms"
    - "Splash screen shows teal background on launch"
    - "All Phase 2-6 features work in mobile apps"
  artifacts:
    - path: "frontend/ios/App/App/Assets.xcassets/AppIcon.appiconset"
      provides: "iOS app icon assets"
    - path: "frontend/android/app/src/main/res/mipmap-hdpi/ic_launcher.png"
      provides: "Android app icon"
    - path: ".planning/phases/08-mobile-platform/08-05-SUMMARY.md"
      provides: "Build verification summary"
  key_links:
    - from: "frontend/dist"
      to: "frontend/ios/App/App/public"
      via: "npx cap sync"
    - from: "frontend/dist"
      to: "frontend/android/app/src/main/assets/public"
      via: "npx cap sync"
---

<objective>
Build native apps and verify mobile functionality.

Purpose: Final integration and verification - ensures all previous work results in working iOS and Android apps ready for TestFlight/APK distribution.

Output: Verified iOS and Android builds, app icons configured, manual testing completed.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-mobile-platform/08-CONTEXT.md
@.planning/phases/08-mobile-platform/08-RESEARCH.md
@.planning/phases/08-mobile-platform/08-01-SUMMARY.md
@.planning/phases/08-mobile-platform/08-02-SUMMARY.md
@.planning/phases/08-mobile-platform/08-03-SUMMARY.md
@.planning/phases/08-mobile-platform/08-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure app icons and splash screen assets</name>
  <files>frontend/ios/App/App/Assets.xcassets, frontend/android/app/src/main/res</files>
  <action>
1. Create a simple teal placeholder app icon:

For now, create placeholder icons. The user can replace with custom designed icons later.

Create icon generation script `frontend/scripts/generate-icons.js`:
```javascript
/**
 * Placeholder icon generator for TODOOO app.
 *
 * Creates simple teal icons with a checkmark symbol.
 * Replace with proper designed icons before store submission.
 *
 * For production, use:
 * - @capacitor/assets: `npx capacitor-assets generate`
 * - Or design tool: Export 1024x1024 PNG and use capacitor-assets
 */

// This is a placeholder - actual icon generation requires canvas or image library
console.log(`
TODOOO App Icon Requirements:

iOS (Assets.xcassets/AppIcon.appiconset):
- 1024x1024 (App Store)
- 180x180 (iPhone @3x)
- 120x120 (iPhone @2x)
- 167x167 (iPad Pro)
- 152x152 (iPad @2x)
- 76x76 (iPad @1x)

Android (res/mipmap-*):
- mipmap-xxxhdpi: 192x192
- mipmap-xxhdpi: 144x144
- mipmap-xhdpi: 96x96
- mipmap-hdpi: 72x72
- mipmap-mdpi: 48x48

Splash Screen:
- iOS: 2732x2732 centered (Xcode generates sizes)
- Android: 480x480 centered icon on teal (#14b8a6) background

Generate with:
  npx @capacitor/assets generate --iconBackgroundColor '#14b8a6' --splashBackgroundColor '#14b8a6'

Requires: icon.png (1024x1024) and splash.png (2732x2732) in assets/ folder
`);
```

2. Update iOS splash screen color in Xcode:

The splash screen is configured via `capacitor.config.ts` (already set backgroundColor: '#14b8a6').

For animated splash (CONTEXT.md request), this would require native code modification.
For MVP, use static teal splash with delayed hide.

3. Sync and verify assets:
```bash
cd frontend
npm run build
npx cap sync
```

4. Verify icon placeholder exists by checking native project:
```bash
ls frontend/ios/App/App/Assets.xcassets/
ls frontend/android/app/src/main/res/mipmap-hdpi/
```

Note to user: Before TestFlight/Play Store submission, replace placeholder icons with designed assets:
- Create 1024x1024 PNG icon
- Run: `npx @capacitor/assets generate --iconBackgroundColor '#14b8a6'`
  </action>
  <verify>
- `cat frontend/scripts/generate-icons.js` shows icon requirements documentation
- `ls frontend/ios/App/App/Assets.xcassets/` shows AppIcon.appiconset exists
- `npm run build && npx cap sync` completes without errors
  </verify>
  <done>Icon configuration documented, sync verified, placeholder assets in place</done>
</task>

<task type="auto">
  <name>Task 2: Build iOS app</name>
  <files>frontend/ios</files>
  <action>
**Note: This task requires macOS with Xcode 15+ installed.**

If on Windows/Linux, this task documents the process for the user to complete on macOS.

1. Build and sync web assets:
```bash
cd frontend
npm run build
npx cap sync ios
```

2. Open Xcode project:
```bash
npx cap open ios
```

3. In Xcode:
   - Select "App" target
   - Set Bundle Identifier: `com.collabboard.todooo`
   - Set Display Name: `TODOOO`
   - Select your Development Team
   - Set Deployment Target: iOS 14.0 (minimum supported)

4. Build for simulator testing:
   - Select iPhone simulator target
   - Product > Build (Cmd+B)
   - Product > Run (Cmd+R)

5. For TestFlight distribution:
   - Select "Any iOS Device (arm64)"
   - Product > Archive
   - In Organizer, select archive > Distribute App
   - Select "App Store Connect"
   - Upload

6. Verify build succeeded:
   - App launches in simulator
   - Canvas loads
   - Touch gestures work

If NOT on macOS, create documentation file:

Create `frontend/docs/ios-build.md`:
```markdown
# iOS Build Instructions

## Prerequisites
- macOS with Xcode 15+
- Apple Developer account
- iOS device or simulator

## Build Steps

1. Sync web assets:
   \`\`\`bash
   cd frontend
   npm run build
   npx cap sync ios
   \`\`\`

2. Open Xcode:
   \`\`\`bash
   npx cap open ios
   \`\`\`

3. Configure project:
   - Bundle Identifier: com.collabboard.todooo
   - Display Name: TODOOO
   - Development Team: (your team)
   - Deployment Target: iOS 14.0

4. Test on simulator:
   - Select simulator target
   - Cmd+R to run

5. Archive for TestFlight:
   - Select "Any iOS Device"
   - Product > Archive
   - Distribute App > App Store Connect

## Troubleshooting

- **Signing errors**: Ensure Development Team is selected
- **Build errors**: Try Product > Clean Build Folder
- **Capacitor sync issues**: Delete ios/App/App/public and re-sync
```
  </action>
  <verify>
On macOS:
- `npx cap sync ios` completes without errors
- Xcode project opens and builds successfully

On Windows/Linux:
- `cat frontend/docs/ios-build.md` shows build documentation
- `npx cap sync ios` completes (creates/updates ios directory)
  </verify>
  <done>iOS build configured and documented (or completed if on macOS)</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete mobile app setup with iOS and Android platforms, touch gestures, offline caching, camera, notifications, and export features</what-built>
  <how-to-verify>
**Verification Checklist:**

1. **Web App Still Works:**
   - `cd frontend && npm run dev`
   - Open http://localhost:5173
   - Verify canvas loads
   - Verify Ctrl+scroll zoom works (desktop)

2. **Android Build (if Android Studio available):**
   ```bash
   cd frontend
   npm run build
   npx cap sync android
   npx cap open android
   ```
   - Build APK: Build > Build Bundle(s) / APK(s) > Build APK(s)
   - Install APK on device/emulator
   - Verify canvas loads
   - Verify pinch-to-zoom works
   - Verify finger drawing works

3. **iOS Build (if on macOS with Xcode):**
   ```bash
   npx cap open ios
   ```
   - Build and run on simulator
   - Verify canvas loads
   - Verify touch gestures work

4. **Feature Verification (on mobile device/emulator):**
   - [ ] Canvas renders and is interactive
   - [ ] Pinch-to-zoom works
   - [ ] One-finger drawing works
   - [ ] Two-finger pan works
   - [ ] Connection status shows correctly
   - [ ] Camera button appears in toolbar (native only)

5. **Success Criteria Check:**
   - [ ] iOS app installs and opens canvas
   - [ ] Android app installs and opens canvas
   - [ ] Pinch zoom works
   - [ ] Finger/stylus drawing works
   - [ ] Phase 2-6 features work (drawing, shapes, notes, TODOs, images, export)

**If any issues found, describe them so they can be fixed.**
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe issues found</resume-signal>
</task>

</tasks>

<verification>
1. Web app still works: `npm run dev` and test in browser
2. `npx cap sync` completes without errors for both platforms
3. Android APK builds successfully (if Android Studio available)
4. iOS project builds successfully (if Xcode available)
5. Human verification of touch gestures and mobile features
</verification>

<success_criteria>
- iOS and Android native projects are properly configured
- App icons and splash screen use teal branding
- iOS app builds and runs (on macOS with Xcode)
- Android APK builds and runs (with Android Studio)
- Canvas loads and is interactive on mobile
- Pinch-to-zoom and touch drawing work
- All Phase 2-6 features work without degradation
- Human verification approved
</success_criteria>

<output>
After completion, create `.planning/phases/08-mobile-platform/08-05-SUMMARY.md`
</output>
